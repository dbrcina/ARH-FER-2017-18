		ORG 0 
		MOVE PODATCI, R1  
		MOVE 10000, SP 

PETLJA	LOADH R2, (R1) 
		LOADH R3, (R1+2) 
		CMP R2, 8000 
		JR_NE DALJE 
		CMP R3, 8000 
		JR_EQ KRAJ 
DALJE	PUSH R2 
		PUSH R3 
		CALL VISE_1 
		AND R0, 8000, R6 
		JR_Z DALJE1 
		SHL R0, 10, R0 
		ASHR R0, 10, R0 
DALJE1	STORE R0, (R1) 
		ADD R1, 4, R1 
		ADD SP, 8, SP 
		JR PETLJA 
		
KRAJ	MOVE 8000, R0 
		SHL R0, 10, R0 
		OR R0, 8000, R0 
		STORE R0, (R1) 
		HALT 

PODATCI	DH 1234, 00FF, 00FF, FF01, 0001, FFFF, 002A, 020A, 0456, 0123, 8000, 8000 ;ADRESA 60 

VISE_1	PUSH R4 
		PUSH R5 
		PUSH R6 
		XOR R0, R0, R0 
		XOR R2, R2, R2 
		XOR R3, R3, R3 
		XOR R4, R4, R4 
		XOR R5, R5, R5 
		LOADH R2, (SP+14) 
		LOADH R3, (SP+10) 
		MOVE 10, R6 
LOOP	SHR R2, 1, R2 
		ADC R4, 0, R4 
		SHR R3, 1, R3 
		ADC R5, 0, R5 
		SUB R6, 1, R6 
		JR_NZ LOOP 
		CMP R4, R5 
		JR_UGT PRVI 
		JR_EQ  ISTI 
		LOADH R0, (SP+10) 
		JR POPAJ		
PRVI	LOADH R0, (SP+14) 
		JR POPAJ
ISTI	MOVE 8000, R0 
		SHL R0, 10, R0 
POPAJ	POP R6 
		POP R5 
		POP R4 
		RET 
